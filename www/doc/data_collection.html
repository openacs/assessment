<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <meta content="text/html; charset=ISO-8859-1"
 http-equiv="content-type">
  <title>Data Collection</title>
</head>
<body>
<h2>Overview</h2>
<p>
The schema for the entities that actually collect, store and retrieve
Assesment data parallels the hierarchical structure of the <a
 href="data-modell.html">Metadata Data Model</a>. In the antecedent
"complex survey" and "questionnaire" systems, this schema was simple
two-level structure:
</p>
<p></p>
<ul>
  <li> <b>survey_responses</b> which capture information about which
survey was completed, by whom, when, etc </li>
  <li> <b>survey_question_responses</b> which capture the actual user
data in a "long skinny table" mechanism </li>
</ul>
<p>
This suffices for one-shot surveys but doesn't support the fine
granularity of user-action tracking, "save&amp;resume" capabilities,
and other requirements identified for the enhanced Assessment package.
Consequently, we use a more extended hierarchy:
</p>
<p></p>
<ul>
  <li> <b>Assessment Session</b> which captures information about
which Assessment, which Subject, when, etc</li>
  <li><b>Section Data</b> which holds information about the status of
each Section </li>
  <li> <b>Item Data</b> which holds the actual data extracted from the
Assessment's html forms; this is the "long skinny table" </li>
</ul>
<p>To support user modification of submitted data (of which
"store&amp;resume" is a special case), we base all these entities in
the CR. In fact, we use both cr_items and cr_revisions in our schema,
since for any given user's Assessment submission, there indeed is a
"final" or "live" version. (In contrast, recall that for any Assessment
itself, different authors may be using different versions of the
Assessment. While this situation may be unusual, the fact that it must
be supported means that the semantics of cr_items don't fit the
Assessment itself. They <i>do</i> fit the semantics of a given user's
Assessment "session" however.)</p>
<p>We distinguish here between "subjects" which are users whose
information is the primary source of the Assessment's responses, and
"users" which are real OpenACS users who can log into the system.
Subjects may be completing the Assessment themselves or may have
completed some paper form that is being transcribed by staff people who
are users. We thus account for both the "real" and one or more "proxy"
respondents via this mechanism. To make live not too complicated we
will assume that all subjects have a user_id in OpenACS.<br>
</p>
<p>Note that we assume that there is only <i>one</i> "real"
respondent. Only one student can take a test for a grade. Even if
multiple clinical staff enter data about a patient, all those values
still pertain to that single patient.&nbsp;<font color="red"></font>
</p>
<h2>Synopsis of Data-Collection Datamodel</h2>
<p>
Here's the schema for this subsystem:<br>
</p>
<p></p>
<center><a
 href="http://openacs.org/storage/download/assessment-datafocus.graffle?version_id=168043"></a>
<p><img alt="Data Modell" src="images/assessment-datafocus.jpg"
 style="width: 1022px; height: 680px;"></p>
</center>
<p>
</p>
<h2>Specific Entities</h2>
<p>This section addresses the attributes the most important entities
have in the data-collection data model -- principally the various
design issues and choices we've made. We omit here literal SQL snippets
since that's what the web interface to CVS is for. ;-)
</p>
<p></p>
<ul>
  <li> <b>Assessment Sessions (as_sessions)</b> are the top of the
data-collection entity hierarchy. They provide the central definition
of a given subject's performance of an Assessment. Attributes include:
    <ul>
      <li> session_id</li>
      <li>cr::name - Identifier, format "$session_id-$last_mod_datetime"<br>
      </li>
      <li> assessment_id (note that this is actually a revision_id) </li>
      <li> subject_id - references a Subjects entity that we don't
define in this package. Should reference the users table as there is no
concept of storing persons in OpenACS in general (yet)<span
 style="color: rgb(255, 0, 0);"></span> </li>
      <li> staff_id - references Users if someone is doing the
Assessment as a proxy for the real subject </li>
      <li> target_datetime - when the subject should do the Assessment </li>
      <li> creation_datetime - when the subject initiated the
Assessment </li>
      <li> first_mod_datetime - when the subject first sent something
back in </li>
      <li> last_mod_datetime - the most recent submission </li>
      <li> completed_datetime - when the final submission produced a
complete Assessment </li>
      <li> session_status - Status of the session (and therefore of the
assessment with regards to the subject) </li>
      <li> ip_address - IP Address of the entry<br>
      </li>
      <li>percent_score - Current percentage of the subject achieved so
far</li>
      <li>consent_timestamp - Time when the consent has been given.<br>
      </li>
    </ul>
    <p> </p>
  </li>
  <li><b>Assessment Section Data (as_section_data)</b> tracks the
state of each Section in the Assessment. Attributes include:
    <ul>
      <li> section_data_id</li>
      <li>cr::name - Identifier, format "$session_id-$last_mod_datetime"<br>
      </li>
      <li> session_id </li>
      <li> section_id </li>
      <li>section_status </li>
    </ul>
    <p> </p>
  </li>
  <li> <b>Assessment Item Data (as_item_data)</b> is the heart
of the data collection piece. This is the "long skinny table" where all
the primary data go -- everything other than "scale" data ie calculated
scoring results derived from these primary responses from subjects.
Attributes include:
    <ul>
      <li> item_data_id </li>
      <li> session_id</li>
      <li>cr::name - identifier in the format "$item_id-$subject_id"</li>
      <li> subject_id </li>
      <li> staff_id </li>
      <li> item_id</li>
      <li> choice_id_answer - references as_item_choices </li>
      <li> boolean_answer </li>
      <li> numeric_answer </li>
      <li> integer_answer </li>
      <li>text_answer </li>
      <li> timestamp_answer </li>
      <li> content_answer - references cr_revisions</li>
      <li>signed_data - This field stores the signed entered data, see
below for explanation</li>
      <li>percent_score<br>
      </li>
      <li>Possible Extension: item_status - Status of the answer. This
might be
"unanswered, delayed, answered, final". This can be put together with <span
 style="font-weight: bold;"> is_unknown_p</span> - defaults to "f" -
important to clearly
distinguish an Item value that is unanswered from a value that means
"We've looked for this answer and it doesn't exist" or "I don't know
the answer to this". Put another way, if none of the other "value"
attributes in this table have values, did the subject just decline to
answer it? Or is the "answer" actually this: "there is no answer". This
attribute toggles that clearly when set to "t".</li>
    </ul>
    <p> </p>
  </li>
  <li> <b>Assessment Scales </b>will for the time being be handled by
an external grading / evaluation package. Assessment will only work
with percentages internally. It might be necessary to add scales into
assessment as well, but we will think about this once the time arrives.
    <p> </p>
  </li>
  <li> <b>Assessment Annotations </b>provides a
flexible way to handle a variety of ways that we need to be able to
"mark up" an Assessment. Subjects may modify a response they've already
made and need to provide a reason for making that change. Teachers may
want to attach a reply to a student's answer to a specific Item or make
a global comment about the entire Assessment. This will be achieved by
using the General Comments System of OpenACS</li>
</ul>
<ul>
  <li><span style="font-weight: bold;">Signing of content</span> allows
to verify that the data submitted is actually from the person it is
pretended to be from. This assumes an public key environment where the
public key is stored along with the user information (e.g. with the
users table) and the data stored in as_item_data is additionally stored
in a signed version (signed with the secret key of the user). To verify
if the data in as_item_data is actually verified the system only has to
check the signed_data with the public key and see if it matches the
data.<br>
  </li>
</ul>
<br>
</body>
</html>
