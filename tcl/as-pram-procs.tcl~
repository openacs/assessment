ad_library {
    Assessment Checks procs
    @author Vivian Aguilar (vivian@viaro.net) Viaro Networks (www.viaro.net)
    @creation-date 2005-01-13
}

namespace eval as::actionparam {}

ad_proc -public as::actionparam::paramdelete {
    {parameter_id}
} {
   Delete parameter if it doesnt have a value asociated
} {

    db_1row select_params "select count(inter_item_check_id) as maps from as_param_map where parameter_id=:parameter_id"

    if { $maps == 0 } {
	db_dml delete_param "delete from as_action_params where parameter_id =:parameter_id " 
    } else {
	ad_return_complaint 1 "You have information stored on the db related to this parameter"
    }
    return  
}


ad_proc -public as::actionparam::actiondelete {
    {action_id}
} {
   Delete action if it doesnt have a parameter asociated
} {

    db_1row select_actions "select count(inter_item_check_id) as maps from as_action_map where action_id=:action_id"
   
    if { $maps == 0 } {
	db_dml delete_action "delete from as_actions where action_id =:action_id " 
	db_dml delete_param "delete from as_action_params where action_id =:action_id " 
    } else {
	ad_return_complaint 1 "You have information stored on the db related to this action"
    }
    return  
}
